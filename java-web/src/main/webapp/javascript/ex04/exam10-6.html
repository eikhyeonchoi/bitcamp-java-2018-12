<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex04</title>
</head>
<body>
  <h1>객체 - 객체 생성과 초기화 VI</h1>
  <script>
"use strict"

// 함수를 생성자처럼 사용하기  
function createScore(name, kor, eng, math) {
	// 자바스크립트의 일반 함수를 생성자처럼 사용할 때는 
	// new 명령을 사용하여 외부에서 빈 객체를 생성한 후, 
	// 이 함수를 호출한다.
	// 외부에서 생성한 객체는 this를 통해 접근할 수 있다.
	// 주의! 
	// => 자바스크립트는 생성자를 만드는 별도의 문법이 없다!
	// => 단지 일반 함수를 이용하여 생성자로 사용할 뿐이다.
	//
	// 일반 함수를 생성자로서 사용한다는 의미?
	// => new 명령 다음에 즉시 호출하는 것을 의미한다.
	// => 예) new createScore();
	//
	// 생성자로서 함수를 호출한다면 빈 객체에 필수 변수와 함수를 추가시키는  
	// Object()라는 함수가 먼저 호출된다.
	// 꼭 자바에서 수퍼 클래스의 생성자를 호출하는 것과 같다!
	// this.Object();
	
	// ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
	// 여기서의 this는 기본객체 new를 의미한다
	
	// new createScore();
	// 1) 빈 객체 생성 (new)
	// 2) Object()를 호출해서 기본 property를 추가한다 (toString, hasOwnProperty 등)
	// 3) createScore()를 호출해 추가 property를 추가함 (<== 객체 초기화)
	// 1), 2) ==> 기본 객체 생성 (= 기본 property추가)
	// ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
    console.log(this);
    this.name = name;
    this.kor = kor;
    this.eng = eng;
    this.math = math;
    this.sum = function() { 
        return this.kor + this.eng + this.math
    };
    this.aver = function() { 
        return this.sum() / 3
    }
}

var scores = []; //new Array();
scores[0] = new createScore("홍길동", 100, 100, 100); 
scores[1] = new createScore("임꺽정", 90, 90, 90);
scores[2] = new createScore("유관순", 80, 80, 80);

// 과목의 점수를 변경하더라도 합계와 평균은 다시 계산되기 때문에 편하다!
scores[2].kor = 100;

for (var score of scores) {
    console.log(score.name, score.kor, score.eng, score.math, 
    		score.sum(), score.aver());
}

console.log(scores[0]);
console.log(scores[1]);
console.log(scores[2]);
console.log(scores[0].toString());

// ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
var testObj = createScore("테스트", 80, 80, 80);
// 빈 객체 없이 호출했으니까 (this.) 에 어떠한 주소도 들어있지 않다
// 객체 없이 createScore()를 호출하면, this 변수는 undefined 상태가 되어 오류 발생
// JS는 컴파일 방식이 아니기 때문에
// new를 통해서만 createScore()를 호출하도록 강제할 방법이 없다
// 대신 개발자 사이 암묵적 룰이 있다
// 생성자로 쓰이는 함수는 함수이름을 대문자로 시작하는 룰이 있다!!!!!
// 이 룰을 지킬 것 ...
// ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

</script>
</body>
</html>





